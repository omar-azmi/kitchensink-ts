"use strict";(()=>{Object.hasOwn||Object.defineProperty(Object,"hasOwn",{value:function(e,r){if(e==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(e),r)},configurable:!0,enumerable:!1,writable:!0});var{from:Fe,isArray:Ue,of:rt}=Array,ne=e=>e.length===0,Ce=String.fromCharCode,oe=Promise.resolve,{isInteger:ae,MAX_VALUE:se,NEGATIVE_INFINITY:tt,POSITIVE_INFINITY:nt}=Number,{assign:$,keys:ot,getPrototypeOf:Oe,values:at}=Object,Ve=Date.now,{iterator:ie,toStringTag:Me}=Symbol,Ne=setTimeout,Be=clearTimeout;var Tr=-se,ue=(e,r=Tr,t=se)=>e<r?r:e>t?t:e,I=(e,r)=>(e%r+r)%r,dt=(e,r,t)=>t*(r-e)+e,yt=(e,r,t)=>(t<0?0:t>1?1:t)*(r-e)+e,mt=(e,r,t,n)=>t*(r[n]-e[n])+e[n],lt=(e,r,t,n)=>(t<0?0:t>1?1:t)*(r[n]-e[n])+e[n],Ar=(e,r,t)=>{let n=e.length,o=Array(n).fill(0);for(let s=0,a=e.length;s<a;s++)o[s]=t*(r[s]-e[s])+e[s];return o},bt=(e,r,t)=>Ar(e,r,t<0?0:t>1?1:t),ft=(e,r,t)=>(t-e)/(r-e),xt=(e,r,t)=>{let n=(t-e)/(r-e);return n<0?0:n>1?1:n},ht=(e,r,t,n)=>(t[n]-e[n])/(r[n]-e[n]),gt=(e,r,t,n)=>{let o=(t[n]-e[n])/(r[n]-e[n]);return o<0?0:o>1?1:o},Tt=(e,r,t)=>r[0]+(t-e[0])*(r[1]-r[0])/(e[1]-e[0]),At=(e,r,t)=>{let n=(t-e[0])/(e[1]-e[0]);return(n<0?0:n>1?1:n)*(r[1]-r[0])+r[0]},_t=e=>{let r=0,t=e.length;for(let n=0;n<t;n++)r+=e[n];return r},It=(e,r)=>e<r?e:r,ce=(e,r)=>e>r?e:r;var E=e=>{let r=e.length,t=e[0]?.length??0;return[r,t]},Ee=e=>{let[r,t]=E(e),n=[];for(let o=0;o<t;o++)n[o]=[];for(let o=0;o<r;o++)for(let s=0;s<t;s++)n[s][o]=e[o][s];return n},je=(e,r,t,...n)=>{let[o,s]=E(e);return t??=ce(o-r,0),e.splice(r,t,...n)},Le=(e,r,t,...n)=>{let[o,s]=E(e),a=n.length>0?Ee(n):Array(o).fill([]);return t??=ce(s-r,0),Ee(e.map((i,u)=>i.splice(r,t,...a[u])))},St=(e,r)=>{let[t,n]=E(e);if(r=I(r,t===0?1:t),r===0)return e;let o=je(e,t-r,r);return je(e,0,0,...o),e},Rt=(e,r)=>{let[t,n]=E(e);if(r=I(r,n===0?1:n),r===0)return e;let o=Le(e,n-r,r);return Le(e,0,0,...o),e},wt=(e,r)=>{let t=e.length,n=r.length,o=e.map(a=>Array(n).fill(a)),s=e.map(()=>r.slice());return[o,s]},Kt=(e,r,t)=>{let n=r.length,o=t.length,s=Array(n).fill(void 0);for(let a=0;a<n;a++){let i=Array(o).fill(0),u=r[a];for(let p=0;p<o;p++)i[p]=e(u,t[p]);s[a]=i}return s};var H=e=>{let{x:r,y:t,width:n,height:o}=e;return n<0&&(n*=-1,r-=n),o<0&&(o*=-1,t-=o),{x:r,y:t,width:n,height:o}},j=e=>Oe(e).constructor,Ct=(e,...r)=>new(j(e))(...r),q=e=>e.prototype;var Nt=(e,...r)=>t=>e.bind(t,...r),c=(e,r,...t)=>n=>e[r].bind(n,...t),Bt=(e,r,...t)=>r.bind(e,...t),Et=(e,r,...t)=>e[r].bind(e,...t),d=q(Array),w=q(Map),F=q(Set),jt=c(d,"at"),Lt=c(d,"concat"),zt=c(d,"copyWithin"),Gt=c(d,"entries"),$t=c(d,"every"),Ht=c(d,"fill"),qt=c(d,"filter"),Jt=c(d,"find"),Yt=c(d,"findIndex"),Wt=c(d,"findLast"),Xt=c(d,"findLastIndex"),Zt=c(d,"flat"),Qt=c(d,"flatMap"),en=c(d,"forEach"),rn=c(d,"includes"),tn=c(d,"indexOf"),nn=c(d,"join"),on=c(d,"keys"),an=c(d,"lastIndexOf"),sn=c(d,"map"),ze=c(d,"pop"),Ge=c(d,"push"),un=c(d,"reduce"),cn=c(d,"reduceRight"),pn=c(d,"reverse"),dn=c(d,"shift"),yn=c(d,"slice"),mn=c(d,"some"),ln=c(d,"sort"),bn=c(d,"splice"),fn=c(d,"unshift"),xn=c(d,"toLocaleString"),hn=c(d,"toReversed"),gn=c(d,"toSorted"),Tn=c(d,"toSpliced"),An=c(d,"toString"),_n=c(d,"values"),In=c(d,"with"),$e=c(d,"splice",0),He=c(d,"at",-1),J=c(F,"add"),Dn=c(F,"clear"),Y=c(F,"delete"),Pn=c(F,"entries"),vn=c(F,"forEach"),pe=c(F,"has"),Sn=c(F,"keys"),Rn=c(F,"values"),wn=c(w,"clear"),de=c(w,"delete"),ye=c(w,"entries"),me=c(w,"forEach"),N=c(w,"get"),le=c(w,"has"),be=c(w,"keys"),W=c(w,"set"),fe=c(w,"values");var Un=(e,r="data.bin",t="application/octet-stream")=>{let n=new Blob([e],{type:t}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=r,o.click(),URL.revokeObjectURL(o.href),o.remove()},_r=e=>{let r=new FileReader;return new Promise((t,n)=>{r.onload=()=>t(r.result),r.onerror=n,r.readAsDataURL(e)})},Ir=e=>_r(e).then(r=>{let[t,n]=r.split(";base64,",2);return[t+";base64,",n]}),Cn=e=>Ir(e).then(r=>r[1]),On=e=>{let r=atob(e),t=r.length,n=new Uint8Array(t);for(let o=0;o<t;o++)n[o]=r.charCodeAt(o);return n},Vn=e=>{let t=[];for(let n=0;n<e.length;n+=32766){let o=e.subarray(n,n+32766);t.push(Ce(...o))}return btoa(t.join(""))},Mn=(e,r)=>{let t,n,o,s=a=>(o=new Promise((i,u)=>n=i).then(s),a);return s(),(...a)=>(Be(t),t=Ne(()=>n(r(...a)),e),o)},Dr=Symbol("a rejection by a throttled function"),Nn=(e,r)=>{let t=0;return(...n)=>{let o=Ve();return o-t>e?(t=o,r(...n)):Dr}};var qe=class{constructor(r){this.length=r;this.items=Array(r),this.back=r-1}items;front=0;back;count=0;[Symbol.iterator](){let r=this.count,t=0;return{next:()=>t<r?{value:this.at(t++),done:!1}:{value:void 0,done:!0}}}pushBack(...r){for(let t of r)this.count===this.length&&this.popFront(),this.items[this.back]=t,this.back=I(this.back-1,this.length),this.count++}pushFront(...r){for(let t of r)this.count===this.length&&this.popBack(),this.items[this.front]=t,this.front=I(this.front+1,this.length),this.count++}getBack(){if(this.count!==0)return this.items[I(this.back+1,this.length)]}getFront(){if(this.count!==0)return this.items[I(this.front-1,this.length)]}popBack(){if(this.count===0)return;this.back=I(this.back+1,this.length);let r=this.items[this.back];return this.items[this.back]=void 0,this.count--,r}popFront(){if(this.count===0)return;this.front=I(this.front-1,this.length);let r=this.items[this.front];return this.items[this.front]=void 0,this.count--,r}rotate(r){let{front:t,back:n,length:o,count:s,items:a}=this;if(s!==0){if(r=I(r,s),s<o)for(let i=0;i<r;i++){let u=I(n-i,o),p=I(t-i-1,o);a[u]=a[p],a[p]=void 0}this.front=I(t-r,o),this.back=I(n-r,o)}}reverse(){let r=this.count/2|0,{length:t,front:n,back:o,items:s}=this;for(let a=1;a<=r;a++){let i=I(o+a,t),u=I(n-a,t),p=s[i];s[i]=s[u],s[u]=p}}resolveIndex(r){return I(this.back+r+1,this.length)}at(r){return this.items[this.resolveIndex(r)]}replace(r,t){this.items[I(this.back+r+1,this.count)]=t}insert(r,t){this.count===this.length&&this.popFront();let n=this.resolveIndex(r);for(let o=this.front;o>n;o--)this.items[o]=this.items[o-1];this.items[n]=t,this.count++}},Je=e=>{let r=[];e.forEach(o=>{r.push(...o)});let t=new Map([...new Set(r)].map(o=>[o,new Set])),n=N(t);for(let[o,s]of e)s.forEach(a=>n(a).add(o));return t},xe=class{constructor(r,t){let n=r??(t?Je(t):new Map),o=t??(r?Je(r):new Map),s=W(n),a=W(o),i=de(n),u=de(o),p=n.size,l=o.size,b=me(n),g=me(o),y=N(n),m=N(o),h=le(n),f=le(o),T=ye(n),M=ye(o),te=be(n),D=be(o),P=fe(n),k=fe(o),Re=(x,...A)=>{let _=y(x)??(s(x,new Set)&&y(x)),v=pe(_),S=J(_);for(let R of A)v(R)||(S(R),m(R)?.add(x)||a(R,new Set([x])))},we=(x,...A)=>{let _=m(x)??(a(x,new Set)&&m(x)),v=pe(_),S=J(_);for(let R of A)v(R)||(S(R),y(R)?.add(x)||s(R,new Set([x])))},gr=()=>{n.clear(),o.clear()},Ke=(x,A=!1)=>{let _=y(x);if(_){for(let v of _)m(v).delete(x);A?_.clear():A=i(x)}return A},ke=(x,A=!1)=>{let _=m(x);if(_){for(let v of _)y(v).delete(x);A?_.clear():A=u(x)}return A};$(this,{fmap:n,rmap:o,size:p,rsize:l,forEach:b,rforEach:g,get:y,rget:m,has:h,rhas:f,entries:T,rentries:M,keys:te,rkeys:D,values:P,rvalues:k,add:Re,radd:we,clear:gr,delete:Ke,rdelete:ke,remove:(x,...A)=>{let _=y(x);if(_){let v=Y(_);for(let S of A)v(S)&&m(S).delete(x)}},rremove:(x,...A)=>{let _=m(x);if(_){let v=Y(_);for(let S of A)v(S)&&y(S).delete(x)}},set:(x,A)=>(Ke(x,!0),Re(x,...A),this),rset:(x,A)=>(ke(x,!0),we(x,...A),this),[ie]:T,[Me]:"InvertibleMap"})}},Ye=class{constructor(r){let t,n=N(r),o=[],s=ze(o),a=Ge(o),i=$e(o),u=He(o),p=new Map,l=N(p),b=W(p),g=D=>{for(let P of n(D)??[]){let k=l(P);k?b(P,k+1):g(P)}b(D,1)},y=D=>{b(D,0);for(let P of n(D)??[]){let k=(l(P)??0)-1;k>-1&&(b(P,k),k<1&&y(P))}},m=()=>{i();for(let[D,P]of p)P>0&&a(D)},h=()=>(t=s(),t!==void 0&&b(t,0),t),f=(...D)=>{p.clear(),D.forEach(g),m()},T=(...D)=>{ne(D)&&t!==void 0&&D.push(t),D.forEach(y),m()},M=()=>{p.clear(),i()},te=function*(){for(t=h();t!==void 0;)yield t,t=h()};$(this,{edges:r,stack:o,fire:f,block:T,clear:M,pop:h,seek:u,[ie]:te})}},he=class{constructor(r){let{rforEach:t,get:n,rget:o}=r,s=new Set,a=J(s),i=Y(s),u={},p={},l=()=>{s.clear(),u={},p={},t((m,h)=>{u[h]=m.size})},b=(...m)=>{console.log(m),l(),m.forEach(a)},g=(...m)=>{let h=[];for(let f of m)i(f)&&n(f)?.forEach(T=>{let M=(u[T]??o(T)?.size??1)-1;M<=0&&h.push(T),u[T]=M});return h.forEach(a),console.log(h),h},y=(...m)=>{let h=[];for(let f of m)i(f),n(f)?.forEach(T=>{(p[T]=(p[T]??0)+1)>=(o(T)?.size??0)&&h.push(T)});return m.concat(ne(h)?h:y(...h))};$(this,{pending:s,clear:l,fire:b,resolve:g,reject:y})}},K=new xe;K.add("A","D","H");K.add("B","E");K.add("C","F","E");K.add("D","E","G");K.add("E","G");K.add("F","E","I");K.add("G","H");var We=new he(K);We.fire("A","C","B");We.resolve("A","B");K.radd("J","A","B","E","H");var X,Pr=()=>{X=new Int32Array(256);let e=-306674912;for(let r=0;r<256;r++){let t=r;for(let n=8;n>0;--n)t=t&1?t>>>1^e:t>>>1;X[r]=t}},qn=(e,r)=>{r=r===void 0?4294967295:r^-1,X===void 0&&Pr();for(let t=0;t<e.length;++t)r=X[(r^e[t])&255]^r>>>8;return(r^-1)>>>0};var ge=(e,r)=>{let t=e;for(let n of r)t=t[n];return t},Xe=(e,r,t)=>{let n=r.pop(),o=ge(e,r);return o[n]=t,e},Wn=e=>[r=>ge(e,r),(r,t)=>Xe(e,r,t)],vr=(e,r)=>ge(e,Ze(r)),Sr=(e,r,t)=>Xe(e,Ze(r),t),Xn=e=>[r=>vr(e,r),(r,t)=>Sr(e,r,t)],Ze=e=>e.split(".").map(r=>r==="0"?0:parseInt(r)||r);var Qe=(e,r)=>Te([e],r),Te=(e,r)=>r[0]==="u"?rr(e):nr(e),er=(e,r,t)=>{let[n,o]=Ae(e,r,t,1);return[n[0],o]},Ae=(e,r,t,n)=>t[0]==="u"?tr(e,r,n):or(e,r,n),rr=e=>{let r=e.length,t=[];for(let n=0;n<r;n++){let o=e[n];o=o*(o>=0?1:-1);let s=[];do s.push((o&127)+128),o>>=7;while(o>0);s[0]&=127,t.push(...s.reverse())}return Uint8Array.from(t)},tr=(e,r=0,t)=>{t===void 0&&(t=1/0);let n=[],o=r,s=e.length,a=0;for(let i=e[r++];t>0&&r<s+1;i=e[r++])a<<=7,a+=i&127,i>>7||(n.push(a),t--,a=0);return r--,[n,r-o]},nr=e=>{let r=e.length,t=[];for(let n=0;n<r;n++){let o=e[n],s=o>=0?1:-1,a=[];for(o=o*s;o>63;)a.push((o&127)+128),o>>=7;a.push(o&63|(s==-1?192:128)),a[0]&=127,t.push(...a.reverse())}return Uint8Array.from(t)},or=(e,r=0,t)=>{t===void 0&&(t=1/0);let n=[],o=r,s=e.length,a=0,i=0;for(let u=e[r++];t>0&&r<s+1;u=e[r++])a===0?(a=(u&64)>0?-1:1,i=u&63):(i<<=7,i+=u&127),u>>7||(n.push(i*a),t--,a=0,i=0);return r--,[n,r-o]},eo=e=>rr([e]),ro=(e,r=0)=>{let[t,n]=tr(e,r,1);return[t[0],n]},to=e=>nr([e]),no=(e,r=0)=>{let[t,n]=or(e,r,1);return[t[0],n]};var io=e=>!!e.buffer,_e=e=>{if(e[2]==="c")return Uint8ClampedArray;switch(e=e[0]+e[1],e){case"u1":return Uint8Array;case"u2":return Uint16Array;case"u4":return Uint32Array;case"i1":return Int8Array;case"i2":return Int16Array;case"i4":return Int32Array;case"f4":return Float32Array;case"f8":return Float64Array;default:return console.error('an unrecognized typed array type `"${type}"` was provided'),Uint8Array}},Rr=()=>new Uint8Array(Uint32Array.of(1).buffer)[0]===1,L=Rr(),uo=(e,r)=>{let t=e.byteLength;for(let n=0;n<t;n+=r)e.subarray(n,n+r).reverse();return e},Ie=(e,r)=>{let t=e.byteLength,n=new Uint8Array(t),o=r;for(let s=0;s<o;s++){let a=o-1-s*2;for(let i=s;i<t+s;i+=o)n[i]=e[i+a]}return n},ar=(...e)=>{let r=[0];for(let n of e)r.push(r[r.length-1]+n.length);let t=new Uint8Array(r.pop());for(let n of e)t.set(n,r.shift());return t},sr=(...e)=>{let r=[0];for(let n of e)r.push(r[r.length-1]+n.length);let t=new(j(e[0]))(r.pop());for(let n of e)t.set(n,r.shift());return t};function z(e,r,t,n){return e??=0,n??=0,t===void 0?[e+n,r===void 0?r:r+n,t]:(r??=t,e+=e>=0?0:t,r+=r>=0?0:t,t=r-e,[e+n,r+n,t>=0?t:0])}var co=(e,r)=>De(e,r),po=(e,r,t=0,n,o)=>{[n,o]=z(n,o,e.length);let s=[];for(let a=n;a<o;a+=r+t)s.push(e.slice(a,a+r));return s},De=(e,r,t=0,n,o)=>{[n,o]=z(n,o,e.length);let s=[];for(let a=n;a<o;a+=r+t)s.push(e.subarray(a,a+r));return s},yo=(e,r)=>e.length!==r.length?!1:wr(e,r),wr=(e,r)=>{let t=Math.min(e.length,r.length);for(let n=0;n<t;n++)if(e[n]!==r[n])return!1;return!0},ir=(e,r)=>{let t=[];for(let n=1;n<r.length;n++)t.push(e.slice(r[n-1],r[n]));return t},mo=(e,r)=>{let t=[];for(let n=1;n<r.length;n++)t.push(e.subarray(r[n-1],r[n]));return t},lo=(e,r)=>{let t=[];for(let n=1;n<r.length;n+=2)t.push(e.slice(r[n-1],r[n]));return t},bo=(e,r)=>{let t=[];for(let n=1;n<r.length;n+=2)t.push(e.subarray(r[n-1],r[n]));return t},fo=(e,r)=>{let t=[];for(let n=1;n<r.length;n+=2)t.push(e.slice(r[n-1],r[n]===void 0?void 0:r[n-1]+r[n]));return t},xo=(e,r)=>{let t=[];for(let n=1;n<r.length;n+=2)t.push(e.subarray(r[n-1],r[n]===void 0?void 0:r[n-1]+r[n]));return t};var ur=new TextEncoder,cr=new TextDecoder,_o=(e,r,t,...n)=>{let[o,s]=dr(t,e,r,...n);return[o,r+s]},Io=(e,r,t,n,...o)=>{let s=pr(t,n,...o);return e.set(s,r),[e,r+s.length]},Do=(...e)=>{let r=[];for(let t of e)r.push(pr(...t));return ar(...r)},Po=(e,r,...t)=>{let n=[],o=0;for(let[s,...a]of t){let[i,u]=dr(s,e,r+o,...a);n.push(i),o+=u}return[n,o]},pr=(e,r,...t)=>{switch(e){case"bool":return Kr(r);case"cstr":return Fr(r);case"str":return Cr(r);case"bytes":return Vr(r);default:return e[1]==="v"?e.endsWith("[]")?Te(r,e):Qe(r,e):e.endsWith("[]")?yr(r,e):Nr(r,e)}},dr=(e,r,t,...n)=>{switch(e){case"bool":return kr(r,t);case"cstr":return Ur(r,t);case"str":return Or(r,t,...n);case"bytes":return Mr(r,t,...n);default:return e[1]==="v"?e.endsWith("[]")?Ae(r,t,e,...n):er(r,t,e):e.endsWith("[]")?mr(r,t,e,...n):Br(r,t,e)}},Kr=e=>Uint8Array.of(e?1:0),kr=(e,r=0)=>[e[r]>=1,1],Fr=e=>ur.encode(e+"\0"),Ur=(e,r=0)=>{let t=e.indexOf(0,r),n=e.subarray(r,t);return[cr.decode(n),n.length+1]},Cr=e=>ur.encode(e),Or=(e,r=0,t)=>{let n=t===void 0?void 0:r+t,o=e.subarray(r,n);return[cr.decode(o),o.length]},Vr=e=>e,Mr=(e,r=0,t)=>{let n=t===void 0?void 0:r+t,o=e.slice(r,n);return[o,o.length]},yr=(e,r)=>{let[t,n,o]=r,s=_e(r),a=parseInt(n),i=!!(o==="l"&&L||o==="b"&&!L||a===1),u=s.from(e);if(u instanceof Uint8Array)return u;let p=new Uint8Array(u.buffer);return i?p:Ie(p,a)},mr=(e,r=0,t,n)=>{let[o,s,a]=t,i=parseInt(s),u=!!(a==="l"&&L||a==="b"&&!L||i===1),p=n?i*n:void 0,l=e.slice(r,p?r+p:void 0),b=l.length,g=_e(t),y=new g(u?l.buffer:Ie(l,i).buffer);return[Array.from(y),b]},Nr=(e,r)=>yr([e],r),Br=(e,r=0,t)=>{let[n,o]=mr(e,r,t,1);return[n[0],o]};var Ro=(e,r)=>{let t={};for(let n in e)t[n]=e[n](r[n]);return t},wo=(e,r)=>{let t={};for(let n in e)t[n]=e[n](...r[n]);return t},U=(e,r)=>{let t=[];for(let n=0;n<e.length;n++)t.push(e[n](r[n]));return t},Ko=(e,r)=>{let t=[];for(let n=0;n<e.length;n++)t.push(e[n](...r[n]));return t};var Pe=(e,r)=>Ue(r)?r.map(e):e(r),O=e=>((e??1)*100).toFixed(0)+"%",Mo=e=>Pe(O,e),V=e=>ue(e??0,0,255).toFixed(0),No=e=>Pe(V,e),ve=e=>(e??0).toFixed(1)+"deg",Bo=e=>Pe(ve,e),C=e=>(e<16?"0":"")+(e|0).toString(16),Er=[C,C,C],Eo=e=>"#"+U(Er,e).join(""),jr=[C,C,C,e=>C(ue((e??1)*255,0,255))],jo=e=>"#"+U(jr,e).join(""),Lo=e=>"rgb("+U([V,V,V],e).join(",")+")",zo=e=>"rgba("+U([V,V,V,O],e).join(",")+")",Go=e=>"hsl("+U([ve,O,O],e).join(",")+")",$o=e=>"hsla("+U([ve,O,O,O],e).join(",")+")";var lr,Z,Se=(e,r)=>(lr??=new OffscreenCanvas(e??10,r??10),lr),br=(e,r)=>(Z===void 0&&(Z=Se(e,r).getContext("2d",{willReadFrequently:!0}),Z.imageSmoothingEnabled=!1),Z),Qo=e=>e===void 0?!1:e.startsWith("data:image/"),ea=e=>e.slice(0,e.indexOf(";base64,")+8),ra=e=>e.slice(5,e.indexOf(";base64,")),ta=e=>e.substring(e.indexOf(";base64,")+8),na=async(e,r,t,n,o)=>{t&&(t=H(t));let s=await G(e,r),a=t?await createImageBitmap(s,t.x,t.y,t.width,t.height,n):await createImageBitmap(s,n),i=Se(),u=br();return i.width=a.width,i.height=a.height,u.globalCompositeOperation="copy",u.resetTransform(),u.drawImage(a,0,0),i.convertToBlob(o)},oa=async(e,r,t,n,o)=>{t&&(t=H(t));let s=await G(e,r),a=t?await createImageBitmap(s,t.x,t.y,t.width,t.height,n):await createImageBitmap(s,n),i=Se(),u=br();return i.width=a.width,i.height=a.height,u.globalCompositeOperation="copy",u.resetTransform(),u.drawImage(a,0,0),u.getImageData(0,0,a.width,a.height,o)},G=(e,r)=>{if(typeof e=="string"){let t=new Image;return t.src=e,t.decode().then(()=>t)}else{if(e instanceof Uint8ClampedArray)return oe(new ImageData(e,r));if(ArrayBuffer.isView(e))return G(new Uint8ClampedArray(e.buffer),r);if(e instanceof ArrayBuffer)return G(new Uint8ClampedArray(e),r);if(e instanceof Array)return G(Uint8ClampedArray.from(e),r)}return oe(e)},aa=(e,r,t,n=1)=>{let o=e.length/r,s=new Uint8ClampedArray(o).fill(1),a=new Uint8ClampedArray(o);if(t!==void 0){for(let i=0;i<o;i++)s[i]=e[i*r+t]<n?0:1;e=e.filter((i,u)=>u%r!==t),r--}for(let i=0;i<r;i++)for(let u=0;u<o;u++)a[u]+=e[u*r+i];if(t!==void 0)for(let i=0;i<o;i++)a[i]*=s[i];return new Uint8Array(a.buffer)},Lr=(e,r,t=1)=>{let{width:n,height:o,data:s}=e,a=s.length/(n*o),i=m=>s.subarray(m*n*a,(m*n+n)*a),u=m=>{let h=new Uint8Array(o*a);for(let f=0;f<o;f++)for(let T=0;T<a;T++)h[f*a+T]=s[(f*n+m)*a+T];return h},p=m=>{let h=0;for(let f=0,T=m.length;f<T;f+=a)h+=r(m[f+0],m[f+1],m[f+2],m[f+3]);return h};console.assert(ae(a));let[l,b,g,y]=[0,0,o,n];for(;l<o&&!(p(i(l))>=t);l++);for(;g>=l&&!(p(i(g))>=t);g--);for(;b<n&&!(p(u(b))>=t);b++);for(;y>=b&&!(p(u(y))>=t);y--);return{x:b,y:l,width:y-b,height:g-l}},zr=(e,r)=>{let{width:t,height:n,data:o}=e,s=o.length/(t*n),a=H({x:0,y:0,width:t,height:n,...r}),[i,u,p,l]=[a.y,a.x,a.y+a.height,a.x+a.width];console.assert(ae(s));let b=a.width*s,g=(t-l+(u-0))*s,y=(i*t+u)*s,m=((p-1)*t+l)*s,h=De(o,b,g,y,m),f=sr(...h);return s===4?new ImageData(f,a.width,a.height):{width:a.width,height:a.height,data:f,colorSpace:e.colorSpace??"srgb"}},sa=(e,r,t=1)=>zr(e,Lr(e,r,t)),ia=(e,r)=>{let{x:t,y:n,width:o,channels:s}=e,{x:a,y:i,width:u,channels:p}=r,l=(a??0)-(t??0),b=(i??0)-(n??0);return g=>p*(g/s%o-l+((g/s/o|0)-b)*u)},ua=e=>{console.error("not implemented")};var da=(e,r)=>{for(let t=0;t<r.length;t++)r[t]=e()},ya=(e,r,t)=>{for(let n=0;n<r.length;n++)r[n]=e(t[n])},ma=(e,r,t,n)=>{for(let o=0;o<r.length;o++)r[o]=e(t[o],n[o])},la=(e,r,t,n,o)=>{for(let s=0;s<r.length;s++)r[s]=e(t[s],n[s],o[s])},ba=(e,r,t,n,o,s)=>{for(let a=0;a<r.length;a++)r[a]=e(t[a],n[a],o[a],s[a])},fa=(e,r,t,n,o,s,a)=>{for(let i=0;i<r.length;i++)r[i]=e(t[i],n[i],o[i],s[i],a[i])},xa=(e,r,...t)=>{let n=t.length,o=Array(n).fill(0);for(let s=0;s<r.length;s++){for(let a=0;a<n;a++)o[a]=t[a][s];r[s]=e(...o)}},ha=(e,r,...t)=>{let n=e(...t);for(let o=0;o<r.length;o++)r[o]=n(o)};var Ia=e=>e[0].map((r,t)=>e.map(n=>n[t])),Da=(e,r,t)=>{[r,t]=z(r,t,e.length);let n=e.slice(r+1,t);for(let o=0;o<n.length;o++)n[o]-=e[r+o-1];return n},Pa=(e,r,t)=>{[r,t]=z(r,t,e.length);let n=e.slice(r,t-1);for(let o=0;o<n.length;o++)n[o]-=e[r+o+1];return n},va=e=>{let r=e.length,t=new(j(e))(r+1).fill(0);for(let n=0;n<r;n++)t[n+1]=t[n]+e[n];return t};var Sa=(e,r=0,t)=>{r??=0,t??=e.length;for(let n=r;n<t;n++)e[n]*=e[n]<0?-1:1;return e},Ra=(e,r=0,t)=>{r??=0,t??=e.length;for(let n=r;n<t;n++)e[n]*=-1;return e},wa=(e,r,t)=>{r??=0,t??=e.length;for(let n=r;n<t;n++)e[n]=~e[n];return e},Ka=(e,r,t,n)=>{t??=0,n??=e.length;for(let o=t;o<n;o++)e[o]&=r;return e},ka=(e,r,t,n)=>{t??=0,n??=e.length;for(let o=t;o<n;o++)e[o]|=r;return e},Fa=(e,r,t,n)=>{t??=0,n??=e.length;for(let o=t;o<n;o++)e[o]^=r;return e},Ua=(e,r,t,n)=>{t??=0,n??=e.length;for(let o=t;o<n;o++)e[o]<<=r;return e},Ca=(e,r,t,n)=>{t??=0,n??=e.length;for(let o=t;o<n;o++)e[o]>>=r;return e},Oa=(e,r,t,n)=>{t??=0,n??=e.length;for(let o=t;o<n;o++)e[o]>>>=r;return e},Va=(e,r,t,n)=>{t??=0,n??=e.length;for(let o=t;o<n;o++)e[o]+=r;return e},Ma=(e,r,t,n)=>{t??=0,n??=e.length;for(let o=t;o<n;o++)e[o]-=r;return e},Na=(e,r,t,n)=>{t??=0,n??=e.length;for(let o=t;o<n;o++)e[o]*=r;return e},Ba=(e,r,t,n)=>{t??=0,n??=e.length;for(let o=t;o<n;o++)e[o]/=r;return e},Ea=(e,r,t,n)=>{t??=0,n??=e.length;for(let o=t;o<n;o++)e[o]**=r;return e},ja=(e,r,t,n)=>{t??=0,n??=e.length;for(let o=t;o<n;o++)e[o]%=r;return e},La=(e,r,t,n)=>{t??=0,n??=e.length;for(let o=t;o<n;o++)e[o]=(e[o]%r+r)%r;return e};var xr={sep:", ",prefix:"0x",postfix:"",trailingSep:!1,bra:"[",ket:"]",toUpperCase:!0,radix:16},Ja=(e,r)=>{let{sep:t,prefix:n,postfix:o,trailingSep:s,bra:a,ket:i,toUpperCase:u,radix:p}={...xr,...r},l=e.buffer?Fe(e):e,b=l.map(g=>{let y=(g|0).toString(p);return y=y.length===2?y:"0"+y,u?y.toUpperCase():y}).reduce((g,y)=>g+n+y+o+t,"");return a+b.slice(0,s?void 0:-t.length)+i},Ya=(e,r)=>{let{sep:t,prefix:n,postfix:o,bra:s,ket:a,radix:i}={...xr,...r},[u,p,l,b,g]=[t,n,o,s,a].map(f=>f.length),y=e.slice(b,g>0?-g:void 0),m=p+2+l+u,h=[];for(let f=p;f<y.length;f+=m)h.push(parseInt(y[f]+y[f+1],i));return h},Gr=e=>e.toUpperCase(),hr=e=>e.toLowerCase(),fr=(e,r)=>r===1?Gr(e):r===-1?hr(e):e,$r=(e,r=0,t=void 0)=>{t=(t<e.length?t:e.length)-1;for(let n=r,o=e.charCodeAt(n++);n<t;o=e.charCodeAt(n++))if(o>64&&o<91)return n-1},Hr=(e,r=0,t=void 0)=>{t=(t<e.length?t:e.length)-1;for(let n=r,o=e.charCodeAt(n++);n<t;o=e.charCodeAt(n++))if(o>96&&o<123)return n-1},qr=(e,r,t=0,n=void 0)=>r===1?$r(e,t,n):r===-1?Hr(e,t,n):void 0,Jr=(e,r)=>{let[t,n,o,s="",a="",i=""]=r,u=e.length-1;return e.map((l,b)=>{let g=fr(l[0],b>0?n:t),y=fr(l.slice(1),o),m=b<u?s:"";return g+y+m}).reduce((l,b)=>l+b,a)+i},Yr=(e,r)=>{let[t,n,o,s="",a="",i=""]=r;e=e.slice(a.length,-i.length||void 0);let u;if(s===""){let p=[0],l=0;for(;l!==void 0;)l=qr(e,n,l+1),p.push(l);u=ir(e,p)}else u=e.split(s);return u.map(p=>hr(p))},Wr=(e,r,t)=>Jr(Yr(e,r),t),B=(e,r)=>t=>Wr(t,e,r),Q=[-1,-1,-1,"_"],ee=[-1,-1,-1,"-"],re=[-1,1,-1,""],Wa=[1,1,-1,""],Xa=[1,1,1,"_"],Za=[1,1,1,"-"],Qa=B(ee,re),es=B(re,ee),rs=B(Q,re),ts=B(re,Q),ns=B(ee,Q),os=B(Q,ee);var is=e=>e>=0&&e<=1,us=e=>e>=0&&e<=255&&e===(e|0),cs=e=>e>=0&&e<=360,ps=e=>e>=0&&e<=Math.PI;})();
